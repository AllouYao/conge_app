{% extends 'imprimer.html.twig' %}

{% block title %}Bulletin de paie{% endblock %}

{% block stylesheets %}

    <style>
        .table-sans-bordure {
            border-collapse: collapse;
        }

        .sans-bordure th, .sans-bordure td {
            border-bottom: none;
            padding: 2px; /* Ajoutez un espacement entre les cellules si nécessaire */
        }

        .small-text {
            font-size: 9px;
        }

        .no-border-button {
            border-bottom: none;
        }

        .no-border-top {
            border-top: none;
        }

        .table-sans-bordure td, .table-sans-bordure th {
            border-bottom: none;
            padding: 4px; /* Ajoutez un espacement entre les cellules si nécessaire */
        }

        .sans-bordure th, .sans-bordure td {
            border-bottom: none;
            padding: 4px; /* Ajoutez un espacement entre les cellules si nécessaire */
        }

        .small-text {
            font-size: 9px;
        }

        .no-border-button {
            border-bottom: none;
        }

        .no-border-top {
            border-top: none;
        }

        span {
            margin-bottom: 4px;
        }

    </style>

{% endblock %}

{% block content %}
    <div class="row mt-3">
        <div class="col-md-12">
            <div class="widget">
                <div class="widget-content">
                    <div class="row mb-1">
                        <div class="col-md-12 mb-2" style="border: 2px double silver; padding: 8px; border-radius: 5px"
                             id="header">
                            <h5 class="text-center"><strong>BULLETIN DE PAIE </strong></h5>
                        </div>
                        <div class="col-md-12 mb-1" style="display: flex">
                            {# Debut logo #}
                            <div class="col-md-1"
                                 style="margin-right: 5px; height: 140px; width: 140px; border: #0b0b0f solid 1px">
                                <p>
                                    <img height="136" width="136" style="margin-left: 2px"
                                         src="{{ asset('img/logo-distrib.jpg') }}" alt="le logo"/>
                                </p>
                            </div>
                            {# Fin logo #}

                            {# Debut information sur le salarié #}
                            <div class="col-md-5"
                                 style="margin-right: 5px; height: 140px; width: 250px; border: #0b0b0f solid 1px">
                                <table class="table table-sm table-borderless mt-3">
                                    <tbody>
                                    <tr class="small-text sans-bordure no-border-top no-border-button">
                                        <th style="font-size: smaller; font-weight: bolder;">Matricule</th>
                                        <td style="font-size: smaller">{{ payroll_departure.matricule }}</td>
                                    </tr>
                                    <tr class="small-text sans-bordure no-border-top no-border-button">
                                        <th style="font-size: smaller; font-weight: bolder;">Service</th>
                                        <td style="font-size: smaller">{{ payroll_departure.workplace }}</td>
                                    </tr>
                                    <tr class="small-text sans-bordure no-border-top no-border-button">
                                        <th style="font-size: smaller; font-weight: bolder;">Catégorie</th>
                                        <td style="font-size: smaller">{{ payroll_departure.categorie }}</td>
                                    </tr>
                                    <tr class="small-text sans-bordure no-border-top no-border-button">
                                        <th style="font-size: smaller; font-weight: bolder;">Nbre de part</th>
                                        <td style="font-size: smaller">{{ payroll_departure.nombre_part|number_format(1, ',', ' ') }}</td>
                                    </tr>
                                    <tr class="small-text sans-bordure no-border-top no-border-button">
                                        <th style="font-size: smaller; font-weight: bolder;">Date d'entrée</th>
                                        <td style="font-size: smaller">{{ payroll_departure.date_embauche }}</td>
                                    </tr>
                                    <tr class="small-text sans-bordure no-border-top ">
                                        <th style="font-size: smaller; font-weight: bolder;">N° CNPS</th>
                                        <td style="font-size: smaller">{{ payroll_departure.numero_cnps }}</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            {# Fin information sur le salarié #}

                            {# Debut information sur la campagne #}
                            <div class="col-md-6" style="height: 140px; width: 250px; border: #0b0b0f solid 1px">
                                <table class="table table-sm table-borderless mt-3">
                                    <tbody>
                                    <tr class="small-text sans-bordure no-border-top no-border-button">
                                        <th style="font-size: smaller; font-weight: bolder;">Periode Exercice</th>
                                        <td style="font-size: smaller"> du {{ payroll_departure.debut_exercise }}
                                            au {{ payroll_departure.fin_exercise }}</td>
                                    </tr>
                                    <tr class="small-text sans-bordure no-border-top no-border-button">
                                        <th style="font-size: smaller; font-weight: bolder;">Date Edition</th>
                                        <td style="font-size: smaller">{{ payroll_departure.date_edition }}</td>
                                    </tr>
                                    <tr class="small-text sans-bordure no-border-top no-border-button">
                                        <th style="font-size: smaller; font-weight: bolder;">Nom & Prénoms</th>
                                        <td style="font-size: smaller">{{ payroll_departure.nom_prenoms|upper }}</td>
                                    </tr>
                                    <tr class="small-text sans-bordure no-border-top no-border-button">
                                        <th style="font-size: smaller; font-weight: bolder;">Emploi</th>
                                        <td style="font-size: smaller">{{ payroll_departure.departement|upper }}</td>
                                    </tr>
                                    <tr class="small-text sans-bordure no-border-top no-border-button">
                                        <th style="font-size: smaller; font-weight: bolder;">Mode Paiement</th>
                                        <td style="font-size: smaller">{{ payroll_departure.mode_paiement|upper }}</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            {# Fin information sur la campagne #}
                        </div>
                        <div class="col-md-12">
                            <table class="table table-bordered" style="height: 200px; border: #0b0b0f solid 1px">
                                <thead class="table-secondary" style="border: #0b0b0f solid 1px">
                                <tr class="small-text text-center sans-bordure">
                                    <th rowspan="2">Rubrique</th>
                                    <th rowspan="2">Libelle</th>
                                    <th rowspan="2">Base</th>
                                    <th colspan="3">Part salariale</th>
                                    <th colspan="2">Part patronale</th>
                                </tr>
                                <tr class="sans-bordure small-text text-center">
                                    <th>Taux</th>
                                    <th>Gain</th>
                                    <th>Retenue</th>
                                    <th>Taux</th>
                                    <th>Retenue</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% if payroll_departure.indemnite_preavis %}
                                    <tr class="small-text sans-bordure no-border-button no-border-top">
                                        <td>001</td>
                                        <td>Indemnité de préavis</td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-end">{{ payroll_departure.indemnite_preavis|number_format(0, ',', ' ') }}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                {% endif %}
                                {% if payroll_departure.indemnite_licenciement_imp %}
                                    <tr class="small-text sans-bordure no-border-button no-border-top">
                                        <td>002</td>
                                        {% if reason == retraite %}
                                            <td>Indemnité de retraite</td>
                                        {% elseif reason == deces %}
                                            <td>Indemnité de décès</td>
                                        {% else %}
                                            <td>Indemnité Licenciement Imp</td>
                                        {% endif %}
                                        <td></td>
                                        <td></td>
                                        <td class="text-end">{{ payroll_departure.indemnite_licenciement_imp|number_format(0, ',', ' ') }}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                {% endif %}
                                {% if payroll_departure.gratification %}
                                    <tr class="small-text sans-bordure no-border-button no-border-top">
                                        <td>003</td>
                                        <td>Gratification</td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-end">{{ payroll_departure.gratification|number_format(0, ',', ' ') }}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                {% endif %}
                                {% if payroll_departure.allocation_conges %}
                                    <tr class="small-text sans-bordure no-border-button no-border-top">
                                        <td>004</td>
                                        <td>Allocation congé</td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-end">{{ payroll_departure.allocation_conges|number_format(0, ',', ' ') }}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                {% endif %}
                                {% if payroll_departure.total_brut %}
                                    <tr class="small-text sans-bordure no-border-button no-border-top">
                                        <td></td>
                                        <td class="text-center">Total brut</td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-end"
                                            style="border-top: solid 1px">{{ payroll_departure.indemnite_licenciement_imp|number_format(0, ',', ' ') }}</td>
                                        <td style="border-top: solid 1px"></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                {% endif %}
                                {% if payroll_departure.amount_its %}
                                    <tr class="small-text sans-bordure no-border-button no-border-top">
                                        <td>005</td>
                                        <td>ITS</td>
                                        <td class="text-end">{{ payroll_departure.indemnite_licenciement_imp|number_format(0, ',', ' ') }}</td>
                                        <td class="text-end">{{ payroll_departure.taux_its }}</td>
                                        <td></td>
                                        <td class="text-end">{{ payroll_departure.amount_its|number_format(0, ',', ' ') }}</td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                {% endif %}
                                {% if payroll_departure.retenu_cnps %}
                                    <tr class="small-text sans-bordure no-border-button no-border-top">
                                        <td>006</td>
                                        <td>Retenue CNPS</td>
                                        <td class="text-end">{{ payroll_departure.total_brut_cnps|number_format(0, ',', ' ') }}</td>
                                        <td class="text-end">{{ payroll_departure.taux_retenu_cnps|number_format(2, ',', ' ') }}</td>
                                        <td></td>
                                        <td class="text-end">{{ payroll_departure.retenu_cnps|number_format(0, ',', ' ') }}</td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                {% endif %}
                                {% if payroll_departure.retenue_general_cnps %}
                                    <tr class="small-text sans-bordure no-border-button no-border-top">
                                        <td>007</td>
                                        <td>Retenue Générale CNPS</td>
                                        <td class="text-end">{{ payroll_departure.total_brut_cnps|number_format(0, ',', ' ') }}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-end">{{ payroll_departure.taux_retenue_general_cnps|number_format(2, ',', ' ') }}</td>
                                        <td class="text-end">{{ payroll_departure.retenue_general_cnps|number_format(0, ',', ' ') }}</td>
                                    </tr>
                                {% endif %}
                                {% if payroll_departure.prestation_familliale %}
                                    <tr class="small-text sans-bordure no-border-button no-border-top">
                                        <td>008</td>
                                        <td>Prestations Familiales</td>
                                        <td class="text-end">{{ payroll_departure.smig|number_format(0, ',', ' ') }}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-end">{{ payroll_departure.taux_prest_familliale|number_format(2, ',', ' ') }}</td>
                                        <td class="text-end">{{ payroll_departure.prestation_familliale|number_format(0, ',', ' ') }}</td>
                                    </tr>
                                {% endif %}
                                {% if payroll_departure.accident_travail %}
                                    <tr class="small-text sans-bordure no-border-button no-border-top">
                                        <td>009</td>
                                        <td>Accident du travail</td>
                                        <td class="text-end">{{ payroll_departure.smig|number_format(0, ',', ' ') }}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-end">{{ payroll_departure.taux_accid_travail|number_format(2, ',', ' ') }}</td>
                                        <td class="text-end">{{ payroll_departure.accident_travail|number_format(0, ',', ' ') }}</td>
                                    </tr>
                                {% endif %}
                                {% if payroll_departure.amount_taux_apprentissage %}
                                    <tr class="small-text sans-bordure no-border-button no-border-top">
                                        <td>010</td>
                                        <td>Taux D'apprentissage</td>
                                        <td class="text-end">{{ payroll_departure.indemnite_licenciement_imp|number_format(0, ',', ' ') }}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-end">{{ payroll_departure.taux_apprentissage|number_format(2, ',', ' ') }}</td>
                                        <td class="text-end">{{ payroll_departure.amount_taux_apprentissage|number_format(0, ',', ' ') }}</td>
                                    </tr>
                                {% endif %}
                                {% if payroll_departure.amount_fpc %}
                                    <tr class="small-text sans-bordure no-border-button no-border-top">
                                        <td>011</td>
                                        <td>FPC</td>
                                        <td class="text-end">{{ payroll_departure.indemnite_licenciement_imp|number_format(0, ',', ' ') }}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-end">{{ payroll_departure.taux_fpc|number_format(2, ',', ' ') }}</td>
                                        <td class="text-end">{{ payroll_departure.amount_fpc|number_format(0, ',', ' ') }}</td>
                                    </tr>
                                {% endif %}
                                {% if payroll_departure.amount_fpc_annuel %}
                                    <tr class="small-text sans-bordure no-border-button no-border-top">
                                        <td>012</td>
                                        <td>FPC REGUL</td>
                                        <td class="text-end">{{ payroll_departure.indemnite_licenciement_imp|number_format(0, ',', ' ') }}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-end">{{ payroll_departure.taux_fpc_annuel|number_format(2, ',', ' ') }}</td>
                                        <td class="text-end">{{ payroll_departure.amount_fpc_annuel|number_format(0, ',', ' ') }}</td>
                                    </tr>
                                {% endif %}
                                {% if payroll_departure.total_cotisation_salary and payroll_departure.total_cotisation_employeur %}
                                    <tr class="small-text sans-bordure no-border-button no-border-top">
                                        <td></td>
                                        <td class="text-center">Total Cotisations</td>
                                        <td></td>
                                        <td></td>
                                        <td style="border-top: solid 1px"></td>
                                        <td class="text-end"
                                            style="border-top: solid 1px">{{ payroll_departure.total_cotisation_salary|number_format(0, ',', ' ') }}</td>
                                        <td></td>
                                        <td class="text-end"
                                            style="border-top: solid 1px">{{ payroll_departure.total_cotisation_employeur|number_format(0, ',', ' ') }}</td>
                                    </tr>
                                {% endif %}
                                {% if payroll_departure.indemnite_licenciement_no_imp %}
                                    <tr class="small-text sans-bordure no-border-button no-border-top">
                                        <td>013</td>
                                        <td>Indemnité Licenciement NI</td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-end">{{ payroll_departure.indemnite_licenciement_no_imp|number_format(0, ',', ' ') }}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                {% endif %}
                                <tr class="small-text sans-bordure no-border-button no-border-top">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr class="small-text sans-bordure no-border-button no-border-top">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr class="small-text sans-bordure no-border-button no-border-top">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr class="small-text sans-bordure no-border-button no-border-top">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr class="small-text sans-bordure no-border-button no-border-top">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr class="small-text sans-bordure no-border-top">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                </tbody>
                            </table>
                            <table class="table table-bordered" style="border: #0b0b0f solid 1px">
                                <thead class="table-secondary" style="border: #0b0b0f solid 1px">
                                <tr class="small-text text-center sans-bordure">
                                    <th>Cumuls</th>
                                    <th>Salaire Brut</th>
                                    <th>Charges Salariales</th>
                                    <th>Charges patronales</th>
                                    <th>Aventage en nature</th>
                                    <th>Net imposable</th>
                                    <th>Heures travaillées</th>
                                    <th>Heures Supplémentaires</th>
                                    <th style="border: #0b0b0f 2px inset">NET A PAYER</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr class="small-text sans-bordure">
                                    <td class="text-center">Periode</td>
                                    <td class="text-end">{{ payroll_departure.total_brut|number_format(0, ',', ' ') }}</td>
                                    <td class="text-end">{{ payroll_departure.total_cotisation_salary|number_format(0, ',', ' ') }}</td>
                                    <td class="text-end">{{ payroll_departure.total_cotisation_employeur|number_format(0, ',', ' ') }}</td>
                                    <td class="text-end">{{ payroll_departure.avantage_en_nature|number_format(0, ',', ' ') }}</td>
                                    <td class="text-end">{{ payroll_departure.indemnite_licenciement_imp|number_format(0, ',', ' ') }}</td>
                                    <td class="text-end">{{ payroll_departure.heure_travailler|number_format(2, ',', ' ') }}</td>
                                    <td class="text-end">{{ payroll_departure.heure_supplementaire|number_format(0, ',', ' ') }}</td>
                                    <td class="text-end"
                                        style="border: #0b0b0f 2px inset">{{ payroll_departure.net_payer|number_format(0, ',', ' ') }}</td>
                                </tr>
                                </tbody>
                            </table>
                            <table class="table table-bordered" style="border: #0b0b0f solid 1px">
                                <tbody class="small-text sans-bordure">
                                <tr>
                                    <td class="h6">Mode de paiement {{ payroll_departure.mode_paiement|capitalize }}
                                        sur {{ 'BIAO' }}
                                        : {{ payroll_departure.account_number }}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="">
        <a class="btn btn-dark btn-print pull-right" style="color: white" href="javascript:window.print()">
            <i class="icon-print"></i>
            Imprimer</a>
        <a class="btn btn-info btn-back pull-right" style="margin-right: 5px" onclick="window.close()"
           href="{{ path('app_home') }}">
            retour</a>
    </div>
{% endblock %}